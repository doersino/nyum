name: Build and Deploy
on:
  push:
      branches:
        - main
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    env:
      TERM: xterm
      TZ: Europe/Berlin
    steps:
      - name: Checkout ðŸ›Žï¸
        uses: actions/checkout@v2.3.1
        with:
          fetch-depth: 0

      - name: Install & ConfigureðŸ”§
        run: |
          wget -O pandoc.deb https://github.com/jgm/pandoc/releases/download/2.13/pandoc-2.13-1-amd64.deb
          wget -O lftp.deb http://archive.ubuntu.com/ubuntu/pool/main/l/lftp/lftp_4.8.4-2build3_amd64.deb
          sudo dpkg -i pandoc.deb lftp.deb
          mkdir -p ~/.ssh/
          cat >>~/.ssh/config <<END
          Host *
            StrictHostKeyChecking no
          END

      - name: Build ðŸ—ï¸
        run: bash build.sh

      - name: Deploy ðŸš€
        env:
            UPLOAD: ${{ secrets.UPLOAD }}
        run: bash deploy.sh 